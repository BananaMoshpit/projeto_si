@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        # Obtenha os dados do formulário de login
        hash_email = request.form['hash_email']
        hash_passw = request.form['hash_passw']
        
        # Inicie uma nova sessão do SQLAlchemy
        db_session = Session()

        # Consulte o banco de dados para encontrar o usuário com as credenciais fornecidas
        user = db_session.query(Pessoa).filter_by(hash_email=hash_email, hash_passw=hash_passw).first()
        
        if user:
            # Se as credenciais forem válidas, salve o usuário na sessão
            session['user_id'] = Pessoa.idpessoa
            session['username'] = Pessoa.name
            
            # Redirecione para a página de sucesso após o login
            return redirect('/home')
        else:
            # Exiba uma mensagem de erro caso as credenciais sejam inválidas
            error_message = 'Credenciais inválidas. Tente novamente.'


              window.location.href = "/login";


            return render_template('login.html', error=error_message)
    
    # Exiba a página de login
    return render_template('login.html')]]]]]]]]]]]






    <!DOCTYPE html>
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="../static/styles/index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu PWA Flask</title>
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/static/service-worker.js')
                .then(function(registration) {
                    console.log('Service Worker registrado com sucesso:', registration);
                })
                .catch(function(error) {
                    console.log('Falha ao registrar o Service Worker:', error);
                });
        }
    </script>
    <script src="../static/js/index.js"></script>
    
</head>
<body>
    <div class="splash-screen">
        <canvas class="circle-crop"><img src="../static/img/Splash screen.png" alt=""></canvas>
      </div>
    <script src="../static/js/index.js"></script>
</body>
</html>



#splash-screen {
    width: 100%;
    height: 100%;
    background-color: #f2f2f2;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    animation: circleAppear 2s linear forwards;
  }
  
  #circle-crop {
    position: fixed;
    width: 100vw;
    height: 100vw;
    background-image: url('../img/Splash\ screen.png'); /* Substitua pelo caminho correto para sua imagem */
    background-size: cover;
    
  }
  
  @keyframes circleAppear {
    0% {
      width: 0;
      height: 0;
      opacity: 0;
    }
    100% {
      width: 100vw;
      height: 100vh;
      opacity: 1;
    }
  }
  



